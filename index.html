<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PointMedian</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 115 115%22><text y=%22.9em%22 font-size=%2290%22>‚è∫Ô∏è</text></svg>">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css">
    <style>
        html,
        body {
            height: 100%;
        }

        body {
            box-sizing: border-box;

            height: calc(100% - 40px);
        }

        body>div {
            min-height: 100%;
            display: grid;
            grid-template-rows: auto 1fr auto;

        }

        main section {
            width: 100%;
            text-align: center;
        }

        footer {
            text-align: center;
        }
    </style>
</head>

<body>
    <div>
        <header>
            <h1>‚è∫Ô∏è PointMedian.fr</h1>
        </header>
        <main>
            <p><span style="margin-right: 6px;">Copier uniquement le point m√©dian&nbsp;:</span><button type="button"
                    id="copyPoint">¬∑</button></p>
            <p>Utiliser l'automate si dessous pour transformer logiquement les "." en "¬∑"&nbsp;:</p>
            <textarea id="source"
                name="textarea-name">Bienvenue √† tous.tes sur ce site. Transformer rapidement vos "." en "¬∑".
Merci aux utilisateur.ices du point m√©dian !</textarea>

            <textarea id="result"></textarea>
            <section>
                <button style="width: 100%" type="button" id="copy">copier</button>
            </section>
            <p>
                <i>
                    La logique de l'automate est simple. Chaque point directement encadr√© par deux lettres minuscules
                    est remplac√© par un point m√©dian. Pour me contacter pour une erreur ou un message, cela se
                    passe <a title="sur GitHub" href="https://github.com/aloisdg/pointmedian/issues/new">sur GitHub</a>.
                </i>
            </p>

            <hr>

            <p>
                Le point m√©dian peut aussi se saisir directement depuis le clavier de votre ordinateur. Wikip√©dia offre
                une section sur le sujet, <a
                    href="https://fr.wikipedia.org/wiki/Point_m%C3%A9dian#Saisie_au_clavier">Point m√©dian - Saise au
                    clavier</a>, dont voici une copie&nbsp;:
            </p>

            <details>
                <summary>Sur GNU/Linux&nbsp;:</summary>
                <ul>
                    <li><kbd>AltGr</kbd>&nbsp;+&nbsp;<kbd>‚áß Maj</kbd>&nbsp;+&nbsp;<kbd>;</kbd>&nbsp;: oss / fran√ßais
                        (variante), oss_latin9 / fran√ßais (variante, Latin-9 uniquement), mac / fran√ßais (Macintosh),
                        oss_nodeadkeys / fran√ßais (variante, sans touche morte), oss_sundeadkeys / fran√ßais (variante,
                        touches mortes Sun)</li>
                    <li><kbd>AltGr</kbd>&nbsp;+&nbsp;<kbd>‚áß Maj</kbd>&nbsp;+&nbsp;<kbd>1</kbd>&nbsp;: latin9 / fran√ßais
                        (variante obsol√®te), latin9_nodeadkeys / fran√ßais (variante obsol√®te, sans touche morte),
                        latin9_sundeadkeys / fran√ßais (variante obsol√®te, touche morte Sun)</li>
                    <li><kbd>AltGr</kbd>&nbsp;+&nbsp;<kbd>:</kbd>&nbsp;: fran√ßais, fran√ßais (sans touche morte),
                        fran√ßais
                        (touches mortes Sun), belge</li>
                    <li><kbd>AltGr</kbd>&nbsp;+&nbsp;<kbd>.</kbd>&nbsp;: fran√ßais Suisse (clavier g√©n√©rique 105 touches
                        PC)
                    </li>
                    <li><kbd>‚áß Maj</kbd>&nbsp;+&nbsp;<kbd>AltGr</kbd>&nbsp;+&nbsp;<kbd>.</kbd>&nbsp;: bepo / fran√ßais
                        (B√©po,
                        ergonomique, fa√ßon Dvorak), bepo_latin9 / fran√ßais (B√©po, ergonomique, fa√ßon Dvorak, Latin-9
                        uniquement),</li>
                    <li><kbd>‚áß Maj</kbd>&nbsp;+&nbsp;<kbd>*</kbd> (du pav√© num√©rique)&nbsp;: oss / fran√ßais (variante),
                        bre
                        / fran√ßais (breton), oss_nodeadkey / fran√ßais (variante, sans touche morte), oss_sundeadkeys /
                        fran√ßais (variante, touches mortes Sun)</li>
                    <li><kbd>AltGr</kbd>&nbsp;+&nbsp;<kbd>*</kbd> (du pav√© num√©rique)&nbsp;: oss_latin9 / fran√ßais
                        (variante, Latin-9 uniquement), bepo / fran√ßais (B√©po, ergonomique, fa√ßon Dvorak), bepo_latin9 /
                        fran√ßais (B√©po, ergonomique, fa√ßon Dvorak, Latin-9 uniquement)</li>
                    <li>Avec une touche compose&nbsp;:
                        <kbd>Compose</kbd>&nbsp;+&nbsp;<kbd>^</kbd>&nbsp;+&nbsp;<kbd>.</kbd>
                        ou <kbd>Compose</kbd>&nbsp;+&nbsp;<kbd>.</kbd>&nbsp;+&nbsp;<kbd>-</kbd>.
                    </li>
                </ul>
            </details>

            <details>
                <summary>Sur macOs&nbsp;:</summary>
                <ul>
                    <li><kbd>‚å• alt</kbd>&nbsp;+&nbsp;<kbd>‚áß maj</kbd>&nbsp;+&nbsp;<kbd>F</kbd> avec un agencement de
                        clavier
                        fran√ßais ou belge‚ÄØ;</li>
                    <li><kbd>‚å• alt</kbd>&nbsp;+&nbsp;<kbd>‚áß maj</kbd>&nbsp;+&nbsp;<kbd>H</kbd> avec un agencement de
                        clavier
                        espagnol, canadien multilingue ou suisse fran√ßais‚ÄØ;</li>
                    <li><kbd>‚å• alt</kbd>&nbsp;+&nbsp;<kbd>‚áß maj</kbd>&nbsp;+&nbsp;<kbd>9</kbd> avec un agencement de
                        clavier
                        anglais am√©ricain, britannique, canadien anglais ou allemand‚ÄØ;</li>
                    <li><kbd>‚å• alt</kbd>&nbsp;+&nbsp;<kbd>;</kbd> ou <kbd>‚å• alt</kbd>&nbsp;+&nbsp;<kbd>‚áß
                            maj</kbd>&nbsp;+&nbsp;<kbd>Œõ</kbd> avec un agencement de clavier grec‚ÄØ;</li>
                    <li><kbd>‚å• alt</kbd>+<kbd>0</kbd><kbd>0</kbd><kbd>B</kbd><kbd>7</kbd> avec l‚Äôagencement de clavier
                        universel (Unicode Hex).</li>
                </ul>
            </details>

            <details>
                <summary>Sur Windows&nbsp;:</summary>
                <ul>
                    <li>avec la combinaison de touche Alt&nbsp;:
                        <ul>
                            <li><kbd>Alt</kbd>+<kbd>2</kbd><kbd>5</kbd><kbd>0</kbd>, le point milieu (¬∑) apparait en
                                rel√¢chant <kbd>Alt</kbd></li>
                            <li><kbd>Alt</kbd>+<kbd>0</kbd><kbd>1</kbd><kbd>8</kbd><kbd>3</kbd>, le point milieu (¬∑)
                                apparait en rel√¢chant <kbd>Alt</kbd>.</li>
                            <li><kbd>0</kbd><kbd>0</kbd><kbd>B</kbd><kbd>7</kbd> suivi de <kbd>Alt</kbd>+<kbd>C</kbd>
                                (ou de
                                <kbd>Alt</kbd>+<kbd>X</kbd>) dans les applications RichEdit (par exemple WordPad)&nbsp;;
                            </li>
                        </ul>
                    </li>
                    <li><kbd>Maj</kbd>&nbsp;+&nbsp;<kbd>3</kbd> avec un agencement de clavier catalan ou espagnol‚ÄØ;</li>
                </ul>
                <p>Sur un clavier B√©po&nbsp;:
                </p>
                <ul>
                    <li><kbd>AltGr</kbd>&nbsp;+&nbsp;<kbd>‚áß maj</kbd>&nbsp;+&nbsp;<kbd>.</kbd>.</li>
                </ul>
            </details>

        </main>
        <footer>
            ¬©&nbsp;Copyright&nbsp;2022&nbsp;aloisdg. <a title="GitHub"
                href="https://github.com/aloisdg/pointmedian">Code&nbsp;Source</a>&nbsp;under&nbsp;üÑØ&nbsp;Copyleft
        </footer>
    </div>
    <script>
        const dot = '.';
        const interpunkt = '¬∑';

        const isLetter = (c) => c.toLowerCase() != c.toUpperCase();

        const isLowerLetter = (c) => isLetter(c) && c === c.toLowerCase()

        // match [a-z√†-√∂√∏-√ø](\.)[a-z√†-√∂√∏-√ø]
        const isBetweenLowercaseLetters = (source, i) =>
            i > 0 &&
            (i + 1) < source.length &&
            isLowerLetter(source[i - 1]) &&
            isLowerLetter(source[i + 1]);

        const replaceDot = source => {
            return [...source].map((c, i) => c === dot && isBetweenLowercaseLetters(source, i) ? interpunkt : c).join("");
        }

        const updateResult = (source) => {
            document.querySelector("#result").value = replaceDot(source)
        }

        const sourceElement = document.querySelector("#source");

        sourceElement.oninput = (e) => updateResult(e.target.value)

        // inspiration from https://w3collective.com/animated-typing-text-effect/
        const text = sourceElement.value;
        sourceElement.value = "";

        document.addEventListener("DOMContentLoaded", () => {
            let letter = 0;
            const typeText = () => {
                if (letter >= text.length)
                    return;
                sourceElement.value += text.charAt(letter);
                updateResult(sourceElement.value);
                letter++;
                setTimeout(typeText, Math.floor(Math.random() * 50) + 25);
            }
            typeText();
        });
        const copy = async (content) => {
            return await navigator.clipboard.writeText(content);
        }

        document.querySelector("#copy").onclick = () => copy(document.querySelector("#result").value)
        document.querySelector("#copyPoint").onclick = () => copy(interpunkt)
    </script>
</body>

</html>
